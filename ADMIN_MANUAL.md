# 🛠️ TakuRating 관리자 매뉴얼

이 문서는 TakuRating 시스템을 운영하는 **관리자(Admin) 전용 가이드**입니다.

선수 등록부터 경기 결과 입력까지, **웹사이트 관리자 페이지**에서 쉽고 빠르게 처리하는 방법을 안내합니다.

---

## 0. 관리자 페이지 접속

1. 우측 상단 **[Login]** 버튼 클릭 (관리자 계정 로그인)
2. 상단 메뉴 **[Admin Panel]** 클릭

---

## 1. 👤 선수 등록하기 (Player Registration)

**접속 경로**: Admin Panel > **[선수 관리]** 탭

### 등록 절차

1. **이름 입력**: 선수의 실명
2. **학교 선택**: 드롭다운 목록에서 선택
3. **부수 설정**: 
   - 대학부: 0부 / 1부 / 2부 / 3부
   - 동아리부: -2부 / -1부 / 0부 / 1부 / 2부 / 3부 / 4부 / 5부 / 6부 / 7부 / 8부
4. **초기 레이팅**: 기본 1500점 (실력자는 1600~1700 조정 가능)
5. **[등록]** 버튼 클릭

### 💡 팁

- **신입생**: 1500점으로 시작 추천
- **편입생/경력자**: 이전 실력 고려하여 1600~1700 설정
- **부수는 나중에 변경 가능**: 승급/강등 시 수정

---

## 2. 📝 경기 결과 입력하기 (Match Entry)

**접속 경로**: Admin Panel > **[경기 기록]** 탭

### 입력 절차

1. **승자 선택**: 이름 검색하여 선택
2. **패자 선택**: 이름 검색하여 선택
3. **스코어 입력**: 
   - 형식: `3-0`, `3-1`, `3-2`
   - 승자 점수가 먼저 오도록
4. **대회 선택** (선택사항): 토너먼트 경기인 경우 선택
5. **[결과 등록]** 클릭

### ⚡ 자동 처리

입력 즉시 다음 작업이 자동으로 실행됩니다:
- ✅ 레이팅 자동 계산 (USATT 알고리즘)
- ✅ 양 선수 레이팅 업데이트
- ✅ 랭킹 자동 재정렬
- ✅ 경기 히스토리 기록

### 💡 팁

- **점수 입력 형식 주의**: 하이픈(-) 사용, 공백 없이
- **바로 확인 가능**: 입력 후 랭킹 페이지에서 즉시 반영 확인
- **대량 입력**: 대회 경기는 한 번에 여러 건 입력 가능

---

## 3. 🏫 학교 관리

**접속 경로**: Admin Panel > **[학교 관리]** 탭

### 학교 추가

1. **학교명 입력**: 예) 한양대학교
2. **학교 코드 입력**: 예) HYU (고유해야 함)
3. **[추가]** 버튼 클릭

### 💡 팁

- **학교 코드**: 3~5자 영문 대문자 추천 (예: HYU, YU, KU)
- **중복 불가**: 동일한 코드는 등록 불가

---

## 4. 🏆 토너먼트 생성

**접속 경로**: Admin Panel > **[토너먼트]** 탭

### 생성 절차

1. **대회명 입력**: 예) 2026 봄 대학 탁구 리그
2. **장소 입력**: 예) 서울 올림픽공원
3. **일시 선택**: 날짜 피커에서 선택
4. **참가 인원**: 예) 32명
5. **대회 유형 선택**:
   - **리그전 (League)**: 정기 리그
   - **오픈 (Open)**: 누구나 참가 가능
   - **선수권 (Championship)**: 공식 대회
6. **[생성]** 버튼 클릭

### 대회 경기 입력

- 경기 입력 시 **대회 선택** 드롭다운에서 해당 대회 선택
- 모든 대회 경기가 자동으로 연결됨

---

## 5. ✏️ 선수 정보 수정

**접속 경로**: Admin Panel > **[선수 관리]** > 선수 클릭 > **[수정]**

### 수정 가능 항목

- ✅ **이름**: 오타 수정 가능
- ✅ **학교**: 전과/편입 시 변경
- ✅ **부수**: 승급/강등 시 변경
- ❌ **레이팅**: 직접 수정 불가 (경기로만 변경)

### 💡 주의사항

- **레이팅 수동 변경 금지**: 공정성을 위해 경기 결과로만 변경
- **이름 변경 신중히**: 모든 경기 기록에 반영됨

---

## 6. 🔗 계정 연동

**사용자가 회원가입 후 선수 프로필과 연결하고 싶을 때**

### 연동 방법

**방법 1: 웹 UI (개발 중)**
- Admin Panel > [계정 관리] > 선수와 사용자 연결

**방법 2: Supabase Dashboard (현재)**

1. **Table Editor** → **profiles** 테이블
   - 사용자의 `id` 확인 (email로 검색)

2. **Table Editor** → **players** 테이블
   - 해당 선수 찾아서 `user_id`에 위 `id` 입력
   - 저장

3. 사용자에게 연동 완료 알림

---

## 7. 🚨 문제 해결 (Troubleshooting)

### 자주 발생하는 문제

**Q. 선수 검색이 안 돼요**
- A. 새로고침(F5) 후 재시도
- A. 선수 이름 정확히 입력했는지 확인
- A. 최근 등록한 선수는 1~2초 후 표시

**Q. 경기 결과를 잘못 입력했어요**
- A. 현재 웹에서는 삭제/수정 불가
- A. Supabase Dashboard 또는 DB 관리자에게 요청 필요
- A. **주의**: 최근 경기가 아니면 수정 시 모든 후속 레이팅이 영향받음

**Q. 레이팅이 이상하게 계산됐어요**
- A. USATT 알고리즘은 레이팅 차이에 따라 8~50점 변동
- A. 강자 이기면 많이 오르고, 약자 이기면 적게 오름
- A. 경기 히스토리에서 계산 과정 확인 가능

**Q. 선수를 삭제하고 싶어요**
- A. 경기 기록이 있는 선수는 삭제 불가 (데이터 무결성)
- A. 비활성화 처리 권장 (부수를 "비활동"으로 변경 등)

**Q. 학교가 목록에 없어요**
- A. [학교 관리]에서 먼저 학교 추가
- A. 학교 코드는 고유해야 함

---

## 8. 📊 유용한 기능

### 통계 확인

**Admin Panel > [통계]** 탭에서 확인 가능:
- 총 선수 수
- 총 경기 수
- 오늘/이번 주/이번 달 경기 수
- 활동 추이 그래프

### 랭킹 내보내기

- [랭킹] 페이지 > **[Excel 다운로드]** 버튼
- 공지/포스터 제작 시 활용

### 대회 기록 관리

- [토너먼트] > 대회 선택 > **[결과 입력]**
- 우승/준우승/4강 등 자동 배지 부여

---

## 9. ✅ 일일 체크리스트

관리자의 일상적인 업무 항목입니다.

**매일:**
- [ ] 경기 결과 입력 (당일 경기)
- [ ] 신규 가입자 계정 연동 요청 확인
- [ ] 랭킹 페이지 정상 작동 확인

**매주:**
- [ ] 주간 활동 통계 확인
- [ ] 부수 조정 필요 선수 검토
- [ ] 사용자 문의 응대

**매월:**
- [ ] 월간 인사이트 생성 (이달의 이변, 상승세 등)
- [ ] 데이터 백업 확인 (Supabase 자동 백업)
- [ ] 승급/강등 선수 부수 조정

---

## 10. 🔐 보안 수칙

**절대 하지 말아야 할 것:**
- ❌ 관리자 계정 공유
- ❌ 공개 장소에서 로그인 상태 유지
- ❌ 비밀번호 단순하게 설정
- ❌ 개인적인 이유로 레이팅 조작

**반드시 해야 할 것:**
- ✅ 경기 결과 정확하게 입력
- ✅ 공정한 부수 배정
- ✅ 로그아웃 후 퇴실
- ✅ 의심스러운 활동 즉시 보고

---

## 11. 📞 지원

### 기술 문제

- **Supabase Dashboard**: https://supabase.com/dashboard
- **시스템 오류**: GitHub Issues 또는 개발자 연락

### 운영 문의

- 내부 운영진 채널
- 동아리 카카오톡 방

### 데이터 백업

- **자동 백업**: Supabase에서 매일 자동 백업
- **수동 백업**: Supabase Dashboard > Database > Backups

---

## 📚 추가 문서

- **[사용자 가이드 (USER_GUIDE.md)](./USER_GUIDE.md)**: 일반 부원들을 위한 기능 소개
- **[데이터 입력 가이드 (DATA_INPUT_GUIDE.md)](./DATA_INPUT_GUIDE.md)**: SQL/CSV로 대량 데이터 입력
- **[Supabase 설정 (SUPABASE_SETUP.md)](./SUPABASE_SETUP.md)**: 데이터베이스 초기 설정

---

## 🎉 마무리

관리자는 **TakuRating의 심장**입니다.

정확한 데이터 입력과 공정한 운영이 모든 선수들의 신뢰를 만듭니다. 

궁금한 점이 있으면 언제든 문의하세요!

**함께 만드는 공정하고 투명한 랭킹 시스템, TakuRating을 응원합니다! 🏓✨**

---

*Last Updated: 2026-02-06*  
*Version: 1.0.0*  
*For User Guide: See USER_GUIDE.md*
